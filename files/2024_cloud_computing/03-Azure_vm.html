<!DOCTYPE html>
<html>
<head>
<title>03-Azure_vm.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<h1 id="assignment-introduction-to-azure-virtual-machines">Assignment: Introduction to Azure Virtual Machines</h1>
<h4 id="objective"><strong>Objective</strong></h4>
<p>This assignment is designed to introduce you to Azure Virtual Machines, covering the setup, configuration, and basic management of VMs. By the end of this assignment, you will understand how to deploy, access, and manage VMs on Microsoft Azure.</p>
<hr>
<h3 id="task-1-create-an-azure-vm"><strong>Task 1: Create an Azure VM</strong></h3>
<ol>
<li>
<p><strong>Log in to Azure Portal</strong></p>
<ul>
<li>Log in to the <a href="https://portal.azure.com/">Azure Portal</a>.</li>
</ul>
</li>
<li>
<p><strong>Create a New Virtual Machine</strong></p>
<ul>
<li>Navigate to the <strong>Virtual Machines</strong> service.</li>
<li>Click <strong>+ Create</strong> and select <strong>Virtual Machine</strong>.</li>
</ul>
</li>
<li>
<p><strong>Configure the VM Settings</strong></p>
<ul>
<li><strong>Subscription</strong>: Use the default subscription.</li>
<li><strong>Resource Group</strong>: Create a new resource group named <code>RG-AzureVM-Assignment</code>.</li>
<li><strong>VM Name</strong>: Use a unique name, such as <code>StudentVM-{your initials}</code>.</li>
<li><strong>Region</strong>: Choose a region close to you (for example, <code>France Central</code>).</li>
<li><strong>Zone</strong>: Choose <code>Zone 3</code>.</li>
<li><strong>Image</strong>: Select <code>Ubuntu Server 20.04 LTS</code>.</li>
<li><strong>Size</strong>: Choose a size like <code>Standard B1s</code> (to minimize cost).</li>
<li><strong>Authentication type</strong>: Use SSH public key or password, depending on your preference.</li>
<li><strong>Inbound Port Rules</strong>: Allow SSH (port 22) and HTTP (80) to connect.</li>
</ul>
</li>
<li>
<p><strong>Create and Deploy the VM</strong></p>
<ul>
<li>Review the settings and click <strong>Review + Create</strong>.</li>
<li>After validation, click <strong>Create</strong> to deploy the VM.</li>
<li>Download the SSH key.</li>
</ul>
</li>
<li>
<p><strong>Document Your VM Configuration</strong></p>
<ul>
<li>Record the following details:
<ul>
<li>VM name</li>
<li>Resource group</li>
<li>Region</li>
<li>Size</li>
<li>OS image</li>
</ul>
</li>
</ul>
</li>
</ol>
<hr>
<h3 id="task-2-connect-to-the-azure-vm"><strong>Task 2: Connect to the Azure VM</strong></h3>
<ol>
<li>
<p><strong>Access the VM</strong></p>
<ul>
<li>Connect using SSH to your deployed VM. Follow the procedure in the section <code>Connect -&gt; Native SSH</code>. You need the previously downloaded key.</li>
<li>All the information related to ssh connectivity are in the Portal.</li>
</ul>
</li>
<li>
<p><strong>Basic Commands</strong></p>
<ul>
<li>Run the following commands on your VM and note the output:
<ul>
<li><code>uname -a</code>: Check the operating system version.</li>
<li><code>df -h</code>: Check disk space usage.</li>
<li><code>free -m</code>: Check memory usage.</li>
<li><code>ping google.com</code>: Verify internet connectivity.</li>
</ul>
</li>
</ul>
</li>
</ol>
<hr>
<h3 id="task-3-configure-the-vm"><strong>Task 3: Configure the VM</strong></h3>
<ol>
<li>
<p><strong>Install Apache (Linux)</strong></p>
<ul>
<li>For Linux (Ubuntu), run:<pre class="hljs"><code><div>sudo apt update
sudo apt install apache2 -y
</div></code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Verify Web Server Installation</strong></p>
<ul>
<li>Open your browser and navigate to <code>http://&lt;Your-VM-Public-IP&gt;</code>.</li>
<li>You should see the default Apache welcome page.</li>
</ul>
</li>
</ol>
<hr>
<h3 id="task-3-install-docker-on-the-vm">Task 3: Install Docker on the VM</h3>
<ol>
<li>
<p><strong>Install Docker</strong></p>
<ul>
<li>Run the following commands to install Docker on Ubuntu:</li>
</ul>
<pre class="hljs"><code><div>sudo apt update
sudo apt install -y docker.io
sudo systemctl start docker
sudo systemctl <span class="hljs-built_in">enable</span> docker
</div></code></pre>
<ul>
<li>Add your user to the Docker group to avoid needing sudo for Docker commands:</li>
</ul>
<pre class="hljs"><code><div>sudo usermod -aG docker <span class="hljs-variable">$USER</span>
</div></code></pre>
<ul>
<li>Log out and log back in for the group change to take effect.</li>
</ul>
</li>
<li>
<p><strong>Verify Docker Installation</strong></p>
<ul>
<li>Run <code>docker --version</code> to confirm Docker is installed.</li>
</ul>
</li>
</ol>
<hr>
<h3 id="task-4-deploy-a-fastapi-application-using-docker"><strong>Task 4: Deploy a FastAPI Application Using Docker</strong></h3>
<ol>
<li>
<p><strong>Create a Simple FastAPI App</strong></p>
<ul>
<li>Create a new directory for your FastAPI app:<pre class="hljs"><code><div>mkdir ~/fastapi-app
<span class="hljs-built_in">cd</span> ~/fastapi-app
</div></code></pre>
</li>
<li>Create a file named <code>main.py</code> with the following FastAPI code:<pre class="hljs"><code><div><span class="hljs-keyword">from</span> fastapi <span class="hljs-keyword">import</span> FastAPI

app = FastAPI()

<span class="hljs-meta">@app.get("/")</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">root</span><span class="hljs-params">()</span>:</span>
    <span class="hljs-keyword">return</span> {<span class="hljs-string">"message"</span>: <span class="hljs-string">"Hello, Azure!"</span>}
</div></code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Create a Dockerfile for the FastAPI App</strong></p>
<ul>
<li>In the <code>fastapi-app</code> directory, create a file named <code>Dockerfile</code> with the following content:<pre class="hljs"><code><div><span class="hljs-comment"># Use an official Python runtime as a parent image</span>
<span class="hljs-keyword">FROM</span> python:<span class="hljs-number">3.9</span>

<span class="hljs-comment"># Set the working directory</span>
<span class="hljs-keyword">WORKDIR</span><span class="bash"> /app</span>

<span class="hljs-comment"># Copy the current directory contents into the container at /app</span>
<span class="hljs-keyword">COPY</span><span class="bash"> . /app</span>

<span class="hljs-comment"># Install FastAPI and Uvicorn</span>
<span class="hljs-keyword">RUN</span><span class="bash"> pip install fastapi uvicorn</span>

<span class="hljs-comment"># Make port 3000 available to the world outside this container</span>
<span class="hljs-keyword">EXPOSE</span> <span class="hljs-number">3000</span>

<span class="hljs-comment"># Run app with Uvicorn on container startup</span>
<span class="hljs-keyword">CMD</span><span class="bash"> [<span class="hljs-string">"uvicorn"</span>, <span class="hljs-string">"main:app"</span>, <span class="hljs-string">"--host"</span>, <span class="hljs-string">"0.0.0.0"</span>, <span class="hljs-string">"--port"</span>, <span class="hljs-string">"3000"</span>]</span>
</div></code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Build and Run the Docker Container</strong></p>
<ul>
<li>Build the Docker image:<pre class="hljs"><code><div>docker build -t fastapi-app .
</div></code></pre>
</li>
<li>Run the Docker container:<pre class="hljs"><code><div>docker run -d -p 3000:3000 fastapi-app
</div></code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Test the FastAPI Application</strong></p>
<ul>
<li>In your browser, navigate to <code>http://&lt;Your-VM-Public-IP&gt;:3000/</code> to test the FastAPI app.</li>
<li>Do you have access to the page ?</li>
</ul>
</li>
</ol>
<hr>
<h3 id="task-5-configure-network-security-group-nsg-rules">Task 5: Configure Network Security Group (NSG) Rules</h3>
<ol>
<li><strong>Modify NSG Rules</strong>
<ul>
<li>Go to the <strong>Networking</strong> settings of your VM.</li>
<li>Add a new inbound rule to allow HTTP traffic on port 3000 (add inbound rule with: Source port <code>*</code> Destination port <code>3000</code>, Service <code>Custom</code>, TCP).</li>
<li>Test access by refreshing the browser to ensure the HTTP rule works by naviagting to <code>http://&lt;Your-VM-Public-IP&gt;:3000/</code>.</li>
</ul>
</li>
</ol>
<hr>
<h3 id="task-6-clean-up-resources">Task 6: Clean Up Resources</h3>
<ol>
<li><strong>Delete the VM and Associated Resources</strong>
<ul>
<li>Go to <strong>Resource Groups</strong> and select <code>RG-AzureVM-Assignment</code>.</li>
<li>Click <strong>Delete Resource Group</strong> to delete all resources created for this assignment.</li>
</ul>
</li>
</ol>
<hr>
<h3 id="deploy-your-own-wesbsite">Deploy your own wesbsite</h3>
<p>Deploy the website your created in the previous assignement on port 5222.</p>
<hr>
<h3 id="additional-resources"><strong>Additional Resources</strong></h3>
<ul>
<li><a href="https://docs.microsoft.com/azure/virtual-machines/">Azure Virtual Machines Documentation</a></li>
</ul>

</body>
</html>
